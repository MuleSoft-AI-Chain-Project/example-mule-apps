<div class="agents-content">
    <div class="agents-tiles-grid" id="agentsGrid">
        <!-- Agent tiles will be populated here -->
    </div>
    <button class="delete-all-btn" id="deleteAllAgentsBtn">Delete All</button>
    <button class="add-default-btn" id="addDefaultAgentsBtn">Add Default</button>
</div>

<!-- Add Agent Modal -->
<div class="modal fade" id="addAgentModal" tabindex="-1" aria-labelledby="addAgentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addAgentModalLabel">Add New Agent</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addAgentForm">
                    <ul class="nav nav-tabs" id="addAgentTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#generalTab" type="button" role="tab" aria-controls="generalTab" aria-selected="true">General</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="authentication-tab" data-bs-toggle="tab" data-bs-target="#authenticationTab" type="button" role="tab" aria-controls="authenticationTab" aria-selected="false">Authentication</button>
                        </li>
                    </ul>
                    <div class="tab-content pt-3" id="addAgentTabsContent">
                        <div class="tab-pane fade show active" id="generalTab" role="tabpanel" aria-labelledby="general-tab" tabindex="0">
                            <div class="mb-3">
                                <label for="agentUrlInput" class="form-label">Agent URL</label>
                                <input type="url" class="form-control" id="agentUrlInput" list="agentUrlOptions" required>
                                <datalist id="agentUrlOptions">
                                    <!-- Options will be populated dynamically -->
                                </datalist>
                            </div>
                            <div class="mb-3">
                                <label for="agentTypeSelect" class="form-label">Agent Type</label>
                                <select class="form-select" id="agentTypeSelect" required>
                                    <option value="">Select Agent Type</option>
                                    <option value="Agentforce">Agentforce</option>
                                    <option value="Amazon Bedrock">Amazon Bedrock</option>
                                    <option value="AutoGen">AutoGen</option>
                                    <option value="CrewAI">CrewAI</option>
                                    <option value="Einstein Models">Einstein Models</option>
                                    <option value="GoogleADK">Google ADK</option>
                                    <option value="Heroku">Heroku</option>
                                    <option value="LangChain">LangChain</option>
                                    <option value="LangChain4J">LangChain4J</option>
                                    <option value="LlamaIndex">LlamaIndex</option>
                                    <option value="MuleSoft AI Chain">MuleSoft AI Chain</option>
                                    <option value="OpenAI Swarm">OpenAI Swarm</option>
                                    <option value="Custom">Custom</option>
                                </select>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="authenticationTab" role="tabpanel" aria-labelledby="authentication-tab" tabindex="0">
                            <div class="mb-3">
                                <label for="authenticationSelect" class="form-label">Authentication</label>
                                <select class="form-select" id="authenticationSelect">
                                    <option value="none">None</option>
                                    <option value="client-credentials">Client Credentials Grant Type</option>
                                </select>
                                <div id="authenticationHelpText" class="form-text" style="display: none; color: #6c757d; font-style: italic;">
                                    No need to define authentication for default agents. Default agents are secured using OAuth 2.0 Token Introspection policy.
                                </div>
                            </div>
                            <div class="mb-3" id="clientCredentialsFields" style="display: none;">
                                <div class="mb-3">
                                    <label for="encodeClientCredentialsInBodySelect" class="form-label">Encode Client Credentials in body</label>
                                    <select class="form-select" id="encodeClientCredentialsInBodySelect" required>
                                        <option value="false" selected>False (Default)</option>
                                        <option value="true">True</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="clientIdInput" class="form-label">Client ID</label>
                                    <input type="text" class="form-control" id="clientIdInput" placeholder="Enter Client ID">
                                </div>
                                <div class="mb-3">
                                    <label for="clientSecretInput" class="form-label">Client Secret</label>
                                    <input type="password" class="form-control" id="clientSecretInput" placeholder="Enter Client Secret">
                                </div>
                                <div class="mb-3">
                                    <label for="tokenUrlInput" class="form-label">Token URL</label>
                                    <input type="url" class="form-control" id="tokenUrlInput" placeholder="Enter Token URL">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveAgentBtn">Save Agent</button>
            </div>
        </div>
    </div>
</div>

<!-- Skill Description Modal -->
<div class="modal fade" id="skillDescModal" tabindex="-1" aria-labelledby="skillDescModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="skillDescModalLabel">Skill Description</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="skillDescModalBody">
                <!-- Skill description will be populated here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Chat Modal -->
<div class="modal fade chat-modal" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="chatModalLabel">Chat with Agent</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="chat-container" id="chatContainer">
                    <!-- Chat messages will appear here -->
                </div>
                <div class="chat-input-container">
                    <form class="chat-input-form" id="chatForm">
                        <textarea class="chat-input" id="chatInput" placeholder="Type your message..." rows="1"></textarea>
                        <button type="submit" class="chat-send-btn" id="chatSendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Loading Backdrop -->
<div id="loadingBackdrop" class="loading-backdrop" style="display: none;">
    <div class="loading-spinner-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing...</div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/agents/agents.js"></script>